<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <!-- If saved to home screen, use edge-to-edge -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Fullscreen Game</title>
  <style>
    /* Base reset */
    html, body { margin: 0; padding: 0; height: 100%; background: #000; overflow: hidden; }
    /* Fill the entire screen */
    #stage {
      position: fixed;
      inset: 0;
      /* Keep critical UI away from notches / home bar if the game respects page size */
      padding: env(safe-area-inset-top, 0) env(safe-area-inset-right, 0)
               env(safe-area-inset-bottom, 0) env(safe-area-inset-left, 0);
    }
    /* On newer Safari, use dynamic viewport height that includes browser UI changes */
    @supports (height: 100dvh) {
      #stage { height: 100dvh; width: 100vw; padding: 0; }
    }
    /* The game frame itself */
    #frame {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
      background: #000;
    }
    /* Optional: show a tiny loading hint while the iframe initializes */
    #hint {
      position: fixed; left: 50%; top: 50%; transform: translate(-50%,-50%);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: #9aa4ad; font-size: 14px; opacity: .8;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="stage">
    <iframe id="frame" src="" allow="fullscreen; gamepad; accelerometer; gyroscope; clipboard-read; clipboard-write"
      allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>
  </div>
  <div id="hint">Loadingâ€¦</div>
  <script>
    // Read ?u=<encoded target url> from the querystring.
    const params = new URLSearchParams(location.search);
    const target = params.get("u") || "https://playgama.com/export/game/barry-prison-parkour-escape-27f2-1?clid=p_18fee4db-df65-4af9-8d67-0431be4b9a9b;device-type=mobile";
    const iframe = document.getElementById("frame");
    iframe.src = target;

    // Hide hint when the game starts drawing.
    iframe.addEventListener("load", () => {
      const h = document.getElementById("hint");
      if (h) h.style.display = "none";
    });

    // Best-effort landscape lock (supported iOS 16+, most Android/desktop)
    if (screen.orientation && screen.orientation.lock) {
      screen.orientation.lock("landscape").catch(() => {});
    }

    // Fix for iOS address bar / dynamic UI jumps: keep an up-to-date --vh variable.
    const setVH = () => {
      document.documentElement.style.setProperty("--vh", (window.innerHeight * 0.01) + "px");
    };
    window.addEventListener("resize", setVH);
    window.addEventListener("orientationchange", () => setTimeout(setVH, 250));
    setVH();
  </script>
</body>
</html>
